<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Histogram Analysis</title>
  <link rel="stylesheet" href="../style.css">

  <!-- Prism.js for syntax highlighting -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <nav class="sidebar">
      <h2>Basic Topics</h2>
      <ul>
        <li><a href="basic.html">Basic Operations</a></li>
        <li><a href="basic_hist.html" class="active">Histogram</a></li>
        <li><a href="arithmetic_op.html">Arithmetic Operations</a></li>
      </ul>
    </nav>

    <!-- Main Content -->
    <main class="content">
      <h1>Histogram Analysis</h1>

      <section>
        <h2>Theory</h2>
        <p>
          A histogram is one of the most fundamental tools in image processing. 
          It provides a <strong>graphical representation of pixel intensity distribution</strong>, 
          allowing us to analyze how brightness and contrast are spread across an image.
        </p>

        <h3>1. Understanding Brightness and Contrast</h3>
        <p>
          A histogram shows how many pixels fall into each intensity level (0–255 for 8-bit images). 
          A narrow histogram may indicate <b>low contrast</b>, while a wider spread suggests <b>higher contrast</b>.
        </p>

        <h3>2. Detecting Exposure Issues</h3>
        <ul>
          <li>If values cluster on the <b>left</b> → the image is likely <b>underexposed</b> (too dark).</li>
          <li>If values cluster on the <b>right</b> → the image may be <b>overexposed</b> (too bright).</li>
        </ul>

        <h3>3. Enhancing Images with Histograms</h3>
        <p>
          Histogram-based methods like <b>contrast stretching</b> and <b>histogram equalization</b> 
          adjust pixel intensities to improve image quality. 
          These are widely used in <i>medical imaging, satellite imaging, and photography</i>.
        </p>

        <h3>4. Grayscale vs. Color Histograms</h3>
        <ul>
          <li><b>Grayscale histograms</b> focus on intensity values from a single channel.</li>
          <li><b>Color histograms</b> are computed separately for Red, Green, and Blue channels, 
              useful for analyzing color balance and detecting artifacts.</li>
        </ul>

        <p>
          In short, histogram analysis helps us <b>diagnose image quality</b>, 
          <b>detect exposure problems</b>, and <b>prepare images for advanced processing tasks</b> 
          like segmentation and enhancement.
        </p>
      </section>

      <section>
        <h2>Python Code</h2>
        <pre><code class="language-python">
import cv2
import numpy as np
import matplotlib.pyplot as plt

def plot_histogram(image, color_space="BGR"):
    """
    Plot histograms for grayscale or color images.
    """
    if color_space == "GRAY":
        # Grayscale histogram
        plt.subplot(1, 2, 1)
        plt.hist(image.ravel(), bins=256, range=[0, 256], color="black")
        plt.title("Grayscale Histogram")
        plt.xlabel("Pixel Intensity")
        plt.ylabel("Frequency")

        plt.subplot(1, 2, 2)
        plt.imshow(image, cmap="gray")
        plt.title("Grayscale Image")
        plt.axis("off")

        plt.subplots_adjust(hspace=0.4, wspace=0.4)
        plt.show()

    elif color_space == "BGR":
        # Convert BGR → RGB for correct color display
        image_rgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)

        plt.subplot(2, 2, 1)
        plt.hist(image[:, :, 2].ravel(), bins=256, range=[0, 256], color="r")
        plt.title("Red Channel Histogram")

        plt.subplot(2, 2, 2)
        plt.hist(image[:, :, 1].ravel(), bins=256, range=[0, 256], color="g")
        plt.title("Green Channel Histogram")

        plt.subplot(2, 2, 3)
        plt.hist(image[:, :, 0].ravel(), bins=256, range=[0, 256], color="b")
        plt.title("Blue Channel Histogram")

        plt.subplot(2, 2, 4)
        plt.imshow(image_rgb)
        plt.title("RGB Image")
        plt.axis("off")

        plt.subplots_adjust(hspace=0.5, wspace=0.4)
        plt.show()

# Load an image
image_path = "assets/dog.jpg"
image = cv2.imread(image_path)

if image is None:
    print("Error: Image not found!")
    exit()

# Convert to grayscale
gray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

# Plot histograms
plot_histogram(gray_image, color_space="GRAY")
plot_histogram(image, color_space="BGR")
        </code></pre>
      </section>

      <section>
        <h2>Output Example</h2>
        <p>
          Below are example histograms for a grayscale and color image:
        </p>
        <div class="output-gallery">
          <figure>
            <img src="../assets/dog_gray_hist.png" alt="Grayscale Histogram">
            <figcaption>Grayscale Histogram</figcaption>
          </figure>
          <figure>
            <img src="../assets/dog_color_hist.png" alt="Color Histogram">
            <figcaption>Color Histogram</figcaption>
          </figure>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
